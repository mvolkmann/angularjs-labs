<h3>Edit "{{book.displayName}}" Book</h3>
<hr>

<form name="editBook" class="form-horizontal col-sm-6" novalidate>
  <!--button ng-click="dump()">Dump</button-->
  <div class="form-group">
    <label for="name" class="col-sm-4 control-label">
      Field Name
    </label>
    <div class="col-sm-8">
      <input id="name" name="name" type="text" class="form-control"
        placeholder="field name" ng-model="field.displayName"
        ng-pattern="/^(?!id$)/" cb-identifier required>
      <!-- The regex above matches any value that is not "id". -->
    </div>
  </div>
  <div class="col-sm-offset-4" ng-show="field.displayName === 'id'">
    <div class="error-box">"id" is a reserved field name.</div>
  </div>
  <div class="form-group">
    <label for="type" class="col-sm-4 control-label">
      Field Type
    </label>
    <div class="col-sm-8">
      <select id="type" class="form-control" ng-model="field.type">
        <option>boolean</option>
        <option>date</option>
        <option>color</option>
        <option>email</option>
        <option>float</option>
        <option>image</option>
        <option>integer</option>
        <option>price</option>
        <option>text</option>
        <option>time</option>
        <option>url</option>
        <option>video</option>
      </select>
    </div>
  </div>
  <div class="form-group">
    <label for="placeholder" class="col-sm-4 control-label">
      Placeholder
    </label>
    <div class="col-sm-8">
      <input id="placeholder" type="text" class="form-control"
        ng-model="field.placeholder">
    </div>
  </div>
  <div class="form-group">
    <label for="required" class="col-sm-4 control-label">
      Required?
    </label>
    <div class="col-sm-8">
      <input id="required" class="checkbox" type="checkbox"
        ng-model="field.required">
    </div>
  </div>
  <div class="form-group">
    <div id="add-btn" class="col-sm-offset-4 col-sm-4">
      <button class="btn btn-default"
        ng-click="addField()" ng-disabled="editBook.$invalid">
        Add
      </button>
    </div>
  </div>
</form>

<table class="col-sm-6">
  <caption>Fields</caption>
  <tr>
    <th>Name</th>
    <th>Type</th>
    <th>Required?</th>
    <th>Delete</th>
  </tr>
  <tr ng-repeat="field in book.fields">
    <td>{{field.displayName}}</td>
    <td>{{field.type}}</td>
    <td>{{field.required}}</td>
    <td class="delete-btn">
      <span class="glyphicon glyphicon-remove" ng-click="deleteField(field)"</span>
    </td>
  </tr>
</table>
